enyo.kind({
    name: "Quotation2",
    kind: "Control",
    components: [
        {
        	tag:"h1",
        	classes:"headerRed",
        	content:"Quotation Calculation Test"
        },
        {
        	kind:"Group",
        	name:"grpGender",
        	components:[
        		{
        			classes:"justButton",
        			kind:"Button",
        			active: true,
        			content:"Male"
        		},
        		{
        			classes:"justButton",
        			kind:"Button",
        			content:"Female"
        		}
        	]
        },
        {
        	kind:"Group",
        	name:"grpSmoker",
        	components:[
        		{
        			classes:"justButton",
        			kind:"Button",
        			active: true,
        			content:"Smoker"
        		},
        		{
        			classes:"justButton",
        			kind:"Button",
        			value:1,
        			content:"Non-Smoker"
        		}
        	]	
        },
        {
        	style:"height:30px"
        },
        {
        	kind:"Input",
        	name:"txtPremium",
        	style:"width:300px",
        	attributes:{
        		type:"Number",
        		maxlength:8
        	},
        	placeholder:"Insert Premium Amount.."
        },
        {
        	style:"height:5px"
        },
        {
        	kind:"Input",
        	name:"txtAge",
        	attributes:{
        		type:"Number",
        		maxlength:3
        	},
        	style:"width:300px",
        	placeholder:"Insert Age..."
        },
        {
        	style:"height:30px"
        },
        {
        	kind:"Button",
        	name:"btnCalcPremium",
        	ontap:"handleCalculateTapped",
        	classes:"justButton",
        	content:"Calculate Premium"
        },
       {
        	tag:"h3",
        	name:"txtResult",
        	content:"Premium is : "
        }
    ],
    published:{
    	rates:[
             {
              age:1,
              mns:212.70,
              ms:212.70,
              fns:211.78,
              fs:211.78
             },
             {
              age:2,
              mns:212.70,
              ms:212.70,
              fns:211.78,
              fs:211.78
             },
             {
              age:3,
              mns:212.70,
              ms:212.70,
              fns:211.78,
              fs:211.78
             },
             {
              age:4,
              mns:212.70,
              ms:212.70,
              fns:211.78,
              fs:211.78
             },
             {
              age:5,
              mns:212.70,
              ms:212.70,
              fns:211.78,
              fs:211.78
             },
             {
              age:6,
              mns:212.70,
              ms:212.70,
              fns:211.78,
              fs:211.7
             },
             {
              age:7,
              mns:212.70,
              ms:212.70,
              fns:211.78,
              fs:211.78
             },
             {
              age:8,
              mns:212.70,
              ms:212.70,
              fns:211.78,
              fs:211.78
             },
             {
              age:9,
              mns:212.70,
              ms:212.70,
              fns:211.78,
              fs:211.78
             },
             {
              age:10,
              mns:212.70,
              ms:212.70,
              fns:211.78,
              fs:211.78
             },
             {
              age:11,
              mns:212.70,
              ms:212.70,
              fns:211.78,
              fs:211.78
             },
             {
              age:12,
              mns:212.70,
              ms:212.70,
              fns:211.78,
              fs:211.78
             },
             {
              age:13,
              mns:212.70,
              ms:212.70,
              fns:211.78,
              fs:211.78
             },
             {
              age:14,
              mns:212.70,
              ms:212.70,
              fns:211.78,
              fs:211.78
             },
             {
              age:15,
              mns:212.70,
              ms:212.70,
              fns:211.78,
              fs:211.78
             },
             {
              age:16,
              mns:212.70,
              ms:212.70,
              fns:211.78,
              fs:211.78
             },
             {
              age:17,
              mns:212.84,
              ms:213.08,
              fns:211.79,
              fs:211.88
             },
             {
              age:18,
              mns:212.97,
              ms:213.45,
              fns:211.80,
              fs:211.98
             },
             {
              age:19,
              mns:213.11,
              ms:213.83,
              fns:211.81,
              fs:212.07
             },
             {
              age:20,
              mns:213.24,
              ms:214.21,
              fns:211.81,
              fs:212.17
             },
             {
              age:21,
              mns:213.38,
              ms:214.59,
              fns:211.82,
              fs:212.27
             },
             {
              age:22,
              mns:213.51,
              ms:214.96,
              fns:211.83,
              fs:212.37
             },
             {
              age:23,
              mns:213.65,
              ms:214.34,
              fns:211.84,
              fs:212.47
             },
             {
              age:24,
              mns:213.79,
              ms:215.72,
              fns:211.85,
              fs:212.56
             },
             {
              age:25,
              mns:213.92,
              ms:216.09,
              fns:211.86,
              fs:212.66
             },
             {
              age:26,
              mns:214.06,
              ms:216.47,
              fns:211.87,
              fs:212.76
             },
             {
              age:27,
              mns:214.19,
              ms:216.85,
              fns:211.87,
              fs:212.86
             },
             {
              age:28,
              mns:214.33,
              ms:217.23,
              fns:211.88,
              fs:212.95
             },
             {
              age:29,
              mns:214.46,
              ms:217.60,
              fns:211.89,
              fs:213.05
             },
             {
              age:30,
              mns:214.60,
              ms:217.98,
              fns:211.90,
              fs:213.15
             },
             {
              age:31,
              mns:214.60,
              ms:217.98,
              fns:211.90,
              fs:213.15
             },
             {
              age:32,
              mns:214.60,
              ms:217.98,
              fns:211.90,
              fs:213.15
             },
             {
              age:33,
              mns:214.60,
              ms:217.98,
              fns:211.90,
              fs:213.15
             },
             {
              age:34,
              mns:214.60,
              ms:217.98,
              fns:211.90,
              fs:213.15
             },
             {
              age:35,
              mns:214.60,
              ms:217.98,
              fns:211.90,
              fs:213.15
             },
             {
              age:36,
              mns:214.89,
              ms:217.11,
              fns:211.97,
              fs:213.90
             },
             {
              age:37,
              mns:215.18,
              ms:220.23,
              fns:212.04,
              fs:214.19
             },
             {
              age:38,
              mns:215.47,
              ms:221.36,
              fns:212.11,
              fs:214.48
             },
             {
              age:39,
              mns:215.76,
              ms:222.48,
              fns:212.18,
              fs:214.77
             },
             {
              age:40,
              mns:216.05,
              ms:223.61,
              fns:212.25,
              fs:215.06
             },
             {
              age:41,
              mns:216.34,
              ms:224.74,
              fns:212.32,
              fs:215.34
             },
             {
              age:42,
              mns:216.63,
              ms:225.86,
              fns:212.39,
              fs:215.63
             },
             {
              age:43,
              mns:216.92,
              ms:225.99,
              fns:212.46,
              fs:215.92
             },
             {
              age:44,
              mns:217.21,
              ms:228.11,
              fns:212.53,
              fs:216.21
             },
             {
              age:45,
              mns:217.50,
              ms:229.24,
              fns:212.60,
              fs:216.50
             },
             {
              age:46,
              mns:218.12,
              ms:310.21,
              fns:212.69,
              fs:217.15
             },
             {
              age:47,
              mns:218.74,
              ms:311.18,
              fns:212.78,
              fs:217.80
             },
             {
              age:48,
              mns:219.36,
              ms:312.16,
              fns:212.87,
              fs:218.45
             },
             {
              age:49,
              mns:219.98,
              ms:313.13,
              fns:212.96,
              fs:219.10
             },
             {
              age:50,
              mns:220.60,
              ms:313.10,
              fns:213.05,
              fs:219.75
             },
             {
              age:51,
              mns:221.22,
              ms:315.07,
              fns:213.14,
              fs:220.39
             },
             {
              age:52,
              mns:221.84,
              ms:316.04,
              fns:213.23,
              fs:221.04
             },
             {
              age:53,
              mns:222.46,
              ms:317.02,
              fns:213.32,
              fs:221.69
             },
             {
              age:54,
              mns:223.08,
              ms:317.99,
              fns:213.41,
              fs:222.34
             },
             {
              age:55,
              mns:223.70,
              ms:318.96,
              fns:213.50,
              fs:222.99
             }
    	]
    },
    create:function(){
    	this.inherited(arguments);
        this.taffyDB = TAFFY(this.rates);
    },
    handleCalculateTapped:function(inSender,inEvent) {
    	if((this.$.txtPremium.getValue() == "") || (this.$.txtAge.getValue() == "")){
    		alert("Please enter premium amount and age...");
    	} else {
    		console.log(this.$.grpGender.getActive().content);
    		console.log(this.$.grpSmoker.getActive().content);
    		var tempGenderCode;
    		if (this.$.grpGender.getActive().content == "Male") {
    			tempGenderCode = "m"
    		} else {
    			tempGenderCode = "f"
    		}

    		if (this.$.grpSmoker.getActive().content == "Smoker") {
    			tempGenderCode += "s"
    		} else {
    			tempGenderCode += "ns"
    		}
    		console.log(tempGenderCode);
            var rateRow = this.taffyDB({age:parseInt(this.$.txtAge.getValue())}).get();
            console.log(rateRow);
            var actualRate = rateRow[0][tempGenderCode];
            var txtTotal = (actualRate * ( parseFloat(this.$.txtPremium.getValue()) ))/1000;

            this.$.txtResult.setContent("Premium is : RM "+txtTotal.toFixed(2) );

     	}
    }

    


    
});